{"version":3,"sources":["../../src/index.js"],"names":[],"mappings":";;;;;;;qBAAkB,OAAO;;;;kBACV,IAAI;;;;sBACA,QAAQ;;;;;;;;;;AAQ3B,SAAS,yBAAyB,GAAG;AACnC,MAAI,WAAW,YAAA,CAAC;;AAEhB,MAAI;AACF,eAAW,GAAG,IAAI,CAAC,KAAK,CAAC,gBAAG,YAAY,CAAC,gBAAgB,CAAC,CAAC,CAAC,IAAI,CAAC;GAClE,CAAC,OAAO,GAAG,EAAE;AACZ,eAAW,GAAG,EAAE,CAAC;GAClB;;AAED,SAAO,WAAW,CAAC;CACpB;;;;;;;;;;;AAUM,SAAS,gBAAgB,CAAC,YAAY,EAAE;AAC7C,MAAM,aAAa,GAAG;AACpB,YAAQ,EAAE,yBAAyB,EAAE;AACrC,eAAW,EAAE,SAAS;AACtB,UAAM,EAAE;AACN,cAAQ,EAAE,IAAI;KACf;AACD,SAAK,EAAE;AACL,cAAQ,EAAE,MAAM;KACjB;GACF,CAAC;;;;AAIF,MAAI,CAAC,MAAM,GAAG,oBAAO,KAAK,CAAC,aAAa,EAAE,YAAY,CAAC,CAAC;;AAExD,yBAAU,MAAM,CAAC,KAAK,CAAC,CACtB,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC,CAC9B,GAAG,EAAE,CAAC;CACR","file":"index.js","sourcesContent":["import Mocha from 'mocha';\nimport fs from 'fs';\nimport lodash from 'lodash';\n\n/**\n *  @summary  Read the users npm package name property to provide a name for\n *            the test suite's initial 'describe'\n *\n *  @returns  <String>  '' || 'some-package-name'\n */\nfunction getDefaultTestDescription() {\n  let packageName;\n\n  try {\n    packageName = JSON.parse(fs.readFileSync('./package.json')).name;\n  } catch (err) {\n    packageName = '';\n  }\n\n  return packageName;\n}\n\n/**\n * @param customConfig:\n *\n *  describe    <String>  Title used by Mocha top-level describe function\n *  testDirPath <String>  the path where your styl tests are\n *  stylus      <Object>  stylus config\n *  mocha       <Object>  mocha config\n */\nexport function stylusTestRunner(customConfig) {\n  const defaultConfig = {\n    describe: getDefaultTestDescription(),\n    testDirPath: './tests',\n    stylus: {\n      compress: true,\n    },\n    mocha: {\n      reporter: 'spec',\n    },\n  };\n\n  //  global config will be used by runner\n  //  for configing stylus compiler and test description / suite path\n  root.config = lodash.merge(defaultConfig, customConfig);\n\n  new Mocha(config.mocha)\n  .addFile(__dirname + '/runner')\n  .run();\n}\n"]}