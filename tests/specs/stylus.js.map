{"version":3,"sources":["../../src/stylus.js"],"names":[],"mappings":";;;;;;sBAAmB,QAAQ;;;;sBACR,QAAQ;;;;wBACN,WAAW;;;;AAEhC,SAAS,QAAQ,CAAC,EAAE,EAAE;AACpB,SAAO,oBAAO,OAAO,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC;CACvC;;AAED,SAAS,IAAI,CAAC,MAAM,EAAE,MAAM,EAAE;;;;AAI5B,MAAM,UAAU,GAAG,oBAAO,MAAM,EAAE,MAAM,CAAC,CAAC;;;;AAI1C,sBAAO,IAAI,CAAC,CAAC,KAAK,EAAE,QAAQ,EAAE,SAAS,CAAC,EAAE,UAAS,MAAM,EAAE;AACzD,QAAI,MAAM,CAAC,MAAM,CAAC,EAAE;AAClB,0BAAO,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,UAAU,CAAC,MAAM,CAAC,EAAE,UAAU,CAAC,CAAC;KACvE;GACF,CAAC,CAAC;;AAEH,SAAO,UAAU,CAAC;CACnB;;qBAEc,UAAS,UAAU,EAAE,MAAM,EAAE,QAAQ,EAAE;AACpD,MAAI,CAAC,UAAU,EAAE,MAAM,CAAC,CACvB,MAAM,CAAC,UAAS,GAAG,EAAE,aAAa,EAAE;AACnC,QAAI,GAAG,EAAE;AACP,YAAM,GAAG,CAAC;KACX;;AAED,YAAQ,CAAC,sBAAS,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;GAC3C,CAAC,CAAC;CACJ","file":"stylus.js","sourcesContent":["import stylus from 'Stylus';\r\nimport lodash from 'lodash';\r\nimport cleanCSS from 'clean-css';\r\n\r\nfunction arrayify(it) {\r\n  return lodash.isArray(it) ? it : [it];\r\n}\r\n\r\nfunction styl(string, config) {\r\n  // First through the whole config at stylus,\r\n  // it should ignore stuff it cannot handle\r\n  // like use/import/include etc?\r\n  const thisStylus = stylus(string, config);\r\n\r\n  // Enumerate over the config options that the\r\n  // stylus API only makes available by methods\r\n  lodash.each(['use', 'import', 'include'], function(option) {\r\n    if (config[option]) {\r\n      lodash.each(arrayify(config[option]), thisStylus[option], thisStylus);\r\n    }\r\n  });\r\n\r\n  return thisStylus;\r\n}\r\n\r\nexport default function(stylusCode, config, callback) {\r\n  styl(stylusCode, config)\r\n  .render(function(err, cssFromStylus) {\r\n    if (err) {\r\n      throw err;\r\n    }\r\n\r\n    callback(cleanCSS.process(cssFromStylus));\r\n  });\r\n}\r\n"]}