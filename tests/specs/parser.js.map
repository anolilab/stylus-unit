{"version":3,"sources":["../../src/parser.js"],"names":[],"mappings":";;;;;;kBAAe,IAAI;;;;wBACE,WAAW;;;;sBACb,QAAQ;;;;qBACW,SAAS;;AAE/C,SAAS,OAAO,CAAC,QAAQ,EAAE;AACzB,MAAM,YAAY,GAAG,oBAAa,gBAAG,YAAY,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,CAAC;;AAErE,SAAO,YAAY,CAAC;CACrB;;AAED,SAAS,qBAAqB,CAAC,UAAU,EAAE;AACzC,MAAI,IAAI,GAAG,UAAU,CAAC;;AAEtB,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AACxC,MAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,GAAG,qBAAc,CAAC;AACjE,MAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;;AAE9B,SAAO;AACL,eAAW,EAAE,WAAW;AACxB,eAAW,EAAE,YAAY,CAAC,CAAC,CAAC;AAC5B,eAAW,EAAE,sBAAS,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;GAC/C,CAAC;CACH;;AAED,SAAS,sBAAsB,CAAC,MAAM,EAAE;;;AAGtC,SAAO,oBAAO,GAAG,CACf,oBAAO,MAAM,CACX,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,iBAEzB,EACD,qBAAqB,CACtB,CAAC;CACH;;AAED,SAAS,WAAW,CAAC,MAAM,EAAE,OAAO,EAAE;AACpC,MAAM,QAAQ,GAAG,MAAM,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,GAAG,qBAAc,CAAC;;AAEhE,MAAI,QAAQ,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE;AAC5B,WAAO,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;GACpD;;AAED,SAAO,EAAE,CAAC;CACX;;AAED,SAAS,2BAA2B,CAAC,UAAU,EAAE;AAC/C,MAAM,QAAQ,GAAG,WAAW,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;CAE7C;;AAED,SAAS,uBAAuB,CAAC,MAAM,EAAE;AACvC,MAAM,QAAQ,GAAG,WAAW,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;CAE7C;;qBAEc,UAAS,IAAI,EAAE;AAC5B,SAAO,sBAAsB,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;CAC9C","file":"parser.js","sourcesContent":["import fs from 'fs';\nimport cleanCSS from 'clean-css';\nimport lodash from 'lodash';\nimport { trimNewlines, isEmpty } from './utils';\n\nfunction getFile(filePath) {\n  const fileContents = trimNewlines(fs.readFileSync(filePath, 'utf8'));\n\n  return fileContents;\n}\n\nfunction extractTestFromString(testString) {\n  let test = testString;\n\n  const description = test.match(/.*/)[0];\n  const stylusAndCss = test.split(/.*@expect.*/).map(trimNewlines);\n  test = test.replace(/.*/, '');\n\n  return {\n    description: description,\n    givenStylus: stylusAndCss[0],\n    expectedCss: cleanCSS.process(stylusAndCss[1]),\n  };\n}\n\nfunction extractTestsFromString(string) {\n  //  Filter empty strings out, it seems that the\n  //  @it line leaves an empty string entry behind in the array\n  return lodash.map(\n    lodash.reject(\n      string.split(/.*@it\\s?/),\n      isEmpty\n    ),\n    extractTestFromString\n  );\n}\n\nfunction getDescribe(string, nummber) {\n  const describe = string.match(/@describe.*/g).map(trimNewlines);\n\n  if (describe[nummber] !== '') {\n    return describe[nummber].replace('@describe ', '');\n  }\n\n  return '';\n}\n\nfunction extractMainDescribeFromTest(testString) {\n  const describe = getDescribe(testString, 0);\n\n}\n\nfunction extractDescribeFromTest(string) {\n  const describe = getDescribe(testString, 1);\n\n}\n\nexport default function(file) {\n  return extractTestsFromString(getFile(file));\n}\n"]}